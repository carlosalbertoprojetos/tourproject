{% extends 'dashboard.html' %}
{% load i18n account static crispy_forms_tags %}
{% block title %}
    Calendário de Eventos
{% endblock title %}
{% block dashboard %} 

<!--Calenário datepicker-->
<link rel="stylesheet" href="https://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />  
<link rel="stylesheet" href="{% static 'css/bootstrap-datepicker.css' %}" />

<!-- Bootstrap CSS -->

<script src="https://code.jquery.com/jquery-1.8.2.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>
  

<script src="{% static 'js/bootstrap-datepicker.js' %}"></script>
<script src="{% static 'js/bootstrap-datepicker.pt-BR.min.js' %}"></script>


<div class="d-grid gap-2 d-md-flex justify-content-md-end">
    <ul class="list-group list-group-horizontal">
        <li class="list-group-item">
          <a href="{% url 'season:calendar_event' %}">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 13C7.44772 13 7 12.5523 7 12C7 11.4477 7.44772 11 8 11C8.55228 11 9 11.4477 9 12C9 12.5523 8.55228 13 8 13Z" fill="currentColor" /><path d="M8 17C7.44772 17 7 16.5523 7 16C7 15.4477 7.44772 15 8 15C8.55228 15 9 15.4477 9 16C9 16.5523 8.55228 17 8 17Z" fill="currentColor" /><path d="M11 16C11 16.5523 11.4477 17 12 17C12.5523 17 13 16.5523 13 16C13 15.4477 12.5523 15 12 15C11.4477 15 11 15.4477 11 16Z" fill="currentColor" /><path d="M16 17C15.4477 17 15 16.5523 15 16C15 15.4477 15.4477 15 16 15C16.5523 15 17 15.4477 17 16C17 16.5523 16.5523 17 16 17Z" fill="currentColor" /><path d="M11 12C11 12.5523 11.4477 13 12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12Z" fill="currentColor" /><path d="M16 13C15.4477 13 15 12.5523 15 12C15 11.4477 15.4477 11 16 11C16.5523 11 17 11.4477 17 12C17 12.5523 16.5523 13 16 13Z" fill="currentColor" /><path d="M8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9H16C16.5523 9 17 8.55228 17 8C17 7.44772 16.5523 7 16 7H8Z" fill="currentColor" /><path fill-rule="evenodd" clip-rule="evenodd" d="M6 3C4.34315 3 3 4.34315 3 6V18C3 19.6569 4.34315 21 6 21H18C19.6569 21 21 19.6569 21 18V6C21 4.34315 19.6569 3 18 3H6ZM18 5H6C5.44772 5 5 5.44772 5 6V18C5 18.5523 5.44772 19 6 19H18C18.5523 19 19 18.5523 19 18V6C19 5.44772 18.5523 5 18 5Z" fill="currentColor" /></svg>
            Calendário
          </a>
         
        </li>
        <li class="list-group-item">
          <a href="{% url 'season:calendar_list' %}">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M20 4H4C3.44771 4 3 4.44772 3 5V19C3 19.5523 3.44772 20 4 20H20C20.5523 20 21 19.5523 21 19V5C21 4.44771 20.5523 4 20 4ZM4 2C2.34315 2 1 3.34315 1 5V19C1 20.6569 2.34315 22 4 22H20C21.6569 22 23 20.6569 23 19V5C23 3.34315 21.6569 2 20 2H4ZM6 7H8V9H6V7ZM11 7C10.4477 7 10 7.44772 10 8C10 8.55228 10.4477 9 11 9H17C17.5523 9 18 8.55228 18 8C18 7.44772 17.5523 7 17 7H11ZM8 11H6V13H8V11ZM10 12C10 11.4477 10.4477 11 11 11H17C17.5523 11 18 11.4477 18 12C18 12.5523 17.5523 13 17 13H11C10.4477 13 10 12.5523 10 12ZM8 15H6V17H8V15ZM10 16C10 15.4477 10.4477 15 11 15H17C17.5523 15 18 15.4477 18 16C18 16.5523 17.5523 17 17 17H11C10.4477 17 10 16.5523 10 16Z" fill="currentColor" /></svg>
            Lista de Eventos  
        </a>
        </li>
        <li class="list-group-item">
          <a href="{% url 'season:calendar_create' %}">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6C12.5523 6 13 6.44772 13 7V11H17C17.5523 11 18 11.4477 18 12C18 12.5523 17.5523 13 17 13H13V17C13 17.5523 12.5523 18 12 18C11.4477 18 11 17.5523 11 17V13H7C6.44772 13 6 12.5523 6 12C6 11.4477 6.44772 11 7 11H11V7C11 6.44772 11.4477 6 12 6Z" fill="currentColor" /><path fill-rule="evenodd" clip-rule="evenodd" d="M5 22C3.34315 22 2 20.6569 2 19V5C2 3.34315 3.34315 2 5 2H19C20.6569 2 22 3.34315 22 5V19C22 20.6569 20.6569 22 19 22H5ZM4 19C4 19.5523 4.44772 20 5 20H19C19.5523 20 20 19.5523 20 19V5C20 4.44772 19.5523 4 19 4H5C4.44772 4 4 4.44772 4 5V19Z" fill="currentColor" /></svg>
            Novo
          </a>
        </li>
      </ul>
</div>
<div class="container-fluid mt-2">
    <div class="container-form">
        <div class="card">
            <div class="card-header p-1">
                <div class="row">                       
                    <div class="col-sm-12 md-6">
                        <h2 class="form-title m-2">Calendário Eventos </h2>
                        <div class="table-responsive">
                            <table id="myTable1" class="table table-striped table-bordered mt-5">                            
                                <thead>
                                  <tr align="center">
                                    <th scope="col">Nome</th>                                
                                    <th scope="col">Vigência</th>
                                    <th scope="col">Destino</th>
                                    <th scope="col">Temporada</th>
                                  </tr>
                                </thead>
                                <tbody>                    
                                           
                                    {% for e in object_list %}
                                    <tr align="center">                                    
                                        <td >{{ e.name_event }}</td>
                                        <td >{{ e.validity }}</td>
                                        <td>{{ e.destiny.name }}</td>
                                        <td>{{ e.season.name }}</td>                                                                    
                                    </tr>                                
                                {% endfor %}                           
                                </tbody>
                            </table>
                        </div>
                                                                    
                        <br>                
                        
                            <!--Calendário-->
                            <div class="tab-content" id="pills-tabContent">
                                <div class="tab-pane fade show active" id="pills-company" role="tabpanel" aria-labelledby="pills-company-tab">
                                    <div class="container-fluid">          
                                        <div class="container-fluid mt-2">
                                            <div class="container-form">
                                                <div class="card">
                                                    <div class="card-header p-1">
                                                        <div class="row">                       
                                                            <div class="col-sm-12 md-6">                                                              
                                                                
                                                                <table class="table table-sm table-hover table-responsive" >
                                                                    <thead>
                                                                    <tr>
                                                                        <th scope="col"><div class="datepicker1" ></div></th>
                                                                        <th scope="col"><div class="datepicker2" ></div></th>
                                                                        <th scope="col"><div class="datepicker3" ></div></th>
                                                                        <th scope="col"><div class="datepicker4" ></div></th>                                                                                                                                
                                                                    </tr>
                                                                    <tr>
                                                                        <th scope="col"><div class="datepicker5" ></div></th>
                                                                        <th scope="col"><div class="datepicker6" ></div></th>
                                                                        <th scope="col"><div class="datepicker7" ></div></th>
                                                                        <th scope="col"><div class="datepicker8" ></div></th>                                                                
                                                                    </tr>
                                                                    <tr>
                                                                        <th scope="col"><div class="datepicker9" ></div></th>
                                                                        <th scope="col"><div class="datepicker10" ></div></th>
                                                                        <th scope="col"><div class="datepicker11" ></div></th>
                                                                        <th scope="col"><div class="datepicker12" ></div></th>                                                                
                                                                    </tr>
                                                                    </thead>                                                            
                                                                </table>                                                                                                             
                                                            </div>       
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>    
                                        </div>         
                                    </div>
                                </div>
                            </div>    
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>    
<script>

    $('.datepicker1').datepicker({
        dateFormat: "dd/mm/yy",                                              
        language: ['pt-BR'],
        todayHighlight: true,
        autoApply: true,        
        startDate: new Date(2022, 1 -1, 1),
        endDate: new Date(2022, 1 -1,31),
        
                            
    });
    
    $('.datepicker2').datepicker({
        dateFormat: "dd/mm/yy",                                              
        language: ['pt-BR'],
        todayHighlight: true,
        autoApply: true,        
        startDate: new Date(2022, 2 -1, 1),
        endDate: new Date(2022, 2 -1,28),       
                            
    }); 

    $('.datepicker3').datepicker({
        dateFormat: "dd/mm/yy",                                              
        language: ['pt-BR'],
        todayHighlight: true,
        autoApply: true,        
        startDate: new Date(2022, 3 -1, 1),
        endDate: new Date(2022, 3 -1,31),
       
                            
    }); 

    $('.datepicker4').datepicker({
        dateFormat: "dd/mm/yy",                                              
        language: ['pt-BR'],
        todayHighlight: true,
        autoApply: true,        
        startDate: new Date(2022, 4 -1, 1),
        endDate: new Date(2022, 4 -1,30),
       
                            
    });

    $('.datepicker5').datepicker({
        dateFormat: "dd/mm/yy",                                              
        language: ['pt-BR'],
        todayHighlight: true,
        autoApply: true,        
        startDate: new Date(2022, 5 -1, 1),
        endDate: new Date(2022, 5 -1,31),
       
                            
    }); 
    $('.datepicker6').datepicker({
        dateFormat: "dd/mm/yy",                                              
        language: ['pt-BR'],
        todayHighlight: true,
        autoApply: true,        
        startDate: new Date(2022, 6 -1, 1),
        endDate: new Date(2022, 6 -1,30),
       
                            
    }); 
    $('.datepicker7').datepicker({
        dateFormat: "dd/mm/yy",                                              
        language: ['pt-BR'],
        todayHighlight: true,
        autoApply: true,        
        startDate: new Date(2022, 7 -1, 1),
        endDate: new Date(2022, 7 -1,31),
       
                            
    }); 
    $('.datepicker8').datepicker({
        dateFormat: "dd/mm/yy",                                              
        language: ['pt-BR'],
        todayHighlight: true,
        autoApply: true,        
        startDate: new Date(2022, 8 -1, 1),
        endDate: new Date(2022, 8 -1,31),
       
                            
    }); 
    $('.datepicker9').datepicker({
        dateFormat: "dd/mm/yy",                                              
        language: ['pt-BR'],
        todayHighlight: true,
        autoApply: true,        
        startDate: new Date(2022, 9 -1, 1),
        endDate: new Date(2022, 9 -1,30),
       
                            
    }); 
    $('.datepicker10').datepicker({
        dateFormat: "dd/mm/yy",                                              
        language: ['pt-BR'],
        todayHighlight: true,
        autoApply: true,        
        startDate: new Date(2022, 10 -1, 1),
        endDate: new Date(2022, 10 -1,31),
       
                            
    }); 
    
    $('.datepicker11').datepicker({
        dateFormat: "dd/mm/yy",                                              
        language: ['pt-BR'],
        todayHighlight: true,
        autoApply: true,        
        startDate: new Date(2022, 11 -1, 1),
        endDate: new Date(2022, 11 -1,30),
       
                            
    });  

    $('.datepicker12').datepicker({
        dateFormat: "dd/mm/yy",                                              
        language: ['pt-BR'],
        todayHighlight: true,
        autoApply: true,        
        startDate: new Date(2022, 12 -1, 1),
        endDate: new Date(2022, 12 -1,31),
       
                            
    });  

    const $tabsToDropdown = $(".tabs-to-dropdown");

    function generateDropdownMarkup(container) {
    const $navWrapper = container.find(".nav-wrapper");
    const $navPills = container.find(".nav-pills");
    const firstTextLink = $navPills.find("li:first-child a").text();
    const $items = $navPills.find("li");
    const markup = `
        <div class="dropdown d-md-none">
        <button class="btn dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            ${firstTextLink}
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"> 
            ${generateDropdownLinksMarkup($items)}
        </div>
        </div>
    `;
    $navWrapper.prepend(markup);
    }

    function generateDropdownLinksMarkup(items) {
    let markup = "";
    items.each(function () {
        const textLink = $(this).find("a").text();
        markup += `<a class="dropdown-item" href="#">${textLink}</a>`;
    });

    return markup;
    }

    function showDropdownHandler(e) {
    // works also
    //const $this = $(this);
    const $this = $(e.target);
    const $dropdownToggle = $this.find(".dropdown-toggle");
    const dropdownToggleText = $dropdownToggle.text().trim();
    const $dropdownMenuLinks = $this.find(".dropdown-menu a");
    const dNoneClass = "d-none";
    $dropdownMenuLinks.each(function () {
        const $this = $(this);
        if ($this.text() == dropdownToggleText) {
        $this.addClass(dNoneClass);
        } else {
        $this.removeClass(dNoneClass);
        }
    });
    }

    function clickHandler(e) {
    e.preventDefault();
    const $this = $(this);
    const index = $this.index();
    const text = $this.text();
    $this.closest(".dropdown").find(".dropdown-toggle").text(`${text}`);
    $this
        .closest($tabsToDropdown)
        .find(`.nav-pills li:eq(${index}) a`)
        .tab("show");
    }

    function shownTabsHandler(e) {
    // works also
    //const $this = $(this);
    const $this = $(e.target);
    const index = $this.parent().index();
    const $parent = $this.closest($tabsToDropdown);
    const $targetDropdownLink = $parent.find(".dropdown-menu a").eq(index);
    const targetDropdownLinkText = $targetDropdownLink.text();
    $parent.find(".dropdown-toggle").text(targetDropdownLinkText);
    }

    $tabsToDropdown.each(function () {
    const $this = $(this);
    const $pills = $this.find('a[data-toggle="pill"]');

    generateDropdownMarkup($this);

    const $dropdown = $this.find(".dropdown");
    const $dropdownLinks = $this.find(".dropdown-menu a");

    $dropdown.on("show.bs.dropdown", showDropdownHandler);
    $dropdownLinks.on("click", clickHandler);
    $pills.on("shown.bs.tab", shownTabsHandler);
    });
      
</script> 

{% endblock %}



                