{% extends 'dashboard.html' %}
{% load i18n account static crispy_forms_tags %}
{% block title %}
    Calendario de Eventos
{% endblock title %}
{% block dashboard %}


<!--Calenário datepicker-->
<link rel="stylesheet" href="{% static 'css/bootstrap-datepicker3.css' %}" />

<!-- Bootstrap CSS -->

<script src="https://code.jquery.com/jquery-1.8.2.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>
  
<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>


<script src="{% static 'js/bootstrap-datepicker.js' %}"></script>
<script src="{% static 'js/bootstrap-datepicker.pt-BR.min.js' %}"></script>
<script src="{% static 'js/disabledays.js' %}"></script>
<script src="{% static 'js/vet_dates.js' %}"></script>

<!--Menu-->
<nav class="navbar navbar-expand-sm navbar-dark">
  <div class="container-fluid">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarTogglerDemo01">            
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="#"></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#"></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#"></a>
        </li>                           
      </ul>           
      <div class="d-flex">
        <a href="{% url 'season:season_event_detail' season.pk %}">
          <button class="btn bg-gradient-primary" type="submit">Modelo Lista</button>
        </a>     
    </div>           
    <div class="d-flex">
        <a href="{% url 'season:calendar_event_detail' season.pk%}">
          <button class="btn bg-gradient-success" type="submit" onclick="reload()">Modelo Calendário</button>
        </a>     
    </div>
    <div class="d-flex">
      <a href="{% url 'season:season_list_create' %}">
        <button class="btn bg-gradient-red" type="submit">Temporada</button>
      </a>     
    </div>  
  </div>
</nav>

<div class="container-fluid mt-2">
  <div class="container-form">
    <div class="card">
      <div class="card-header p-1">
        <div class="row">    
          <div class="col-sm-12 col-md-6">                          
            <h2 class="form-title m-2">Calendário de Eventos da - {{season.name}} de {{season.destiny.city}}-{{season.destiny.state}}</h2>
          </div>          
               
          <table class="table table-sm table-responsive" >
            <thead style="font-size: 14px !important;">             
              <tr>   
                {% for x in range|slice:'1:5' %} 
                  <th scope="col"><div class='datepicker{{x}}'></div></th>
                {% endfor %}                                                                            
              </tr>
              <tr>
                {% for y in range|slice:'5:9' %} 
                  <th scope="col"><div class='datepicker{{y}}'></div></th>
                {% endfor %}               
              </tr>
              <tr>
                {% for y in range|slice:'9:13' %} 
                  <th scope="col"><div class='datepicker{{y}}'></div></th>
                {% endfor %}               
              </tr>                         
            </thead>            
          </table>                                       
        </div>                     
      </div>  
    </div>
  </div>
</div>
<!--br>
{{dates}}
<br--> 

      
            
<script> 
//function autoRefresh() {
  //      window.location = window.location.href;
  //  }
  //  setInterval('autoRefresh()', 102000);
  
  
    function reload(){
    document.location.reload(true);
    
  }
           
  var obj = JSON.parse(vet_dates)
  var highlight_dates = []   
                
  for (var d in obj)
    highlight_dates.push(obj[d])  
      
    //console.log('Data',highlight_dates)
    //alert(array_dates)
    //function decodeEntities(encodedString) {
    //  var textArea = document.createElement('textarea');
    //  textArea.innerHTML = encodedString;          
    //  return textArea.value;          
    //}       

  //var data = ["{{e.date_init|date:'j/n/Y'}}","{{e.date_fin|date:'j/n/Y'}}"]        
  //console.log(data)                    
  //di = new Date("{{e.date_init |date:'n/j/Y'}}");
  //df = new Date("{{e.date_init |date:'n/j/Y'}}");
  //mes_init = di.getDate()+'/'+(di.getMonth()+1)+'/'+di.getFullYear()
  //console.log(mes_init)      
  
  
  //janeiro 2022/2023

  $('.datepicker1').datepicker({        
    dateFormat: "m/d/y",                                              
    language: ['pt-BR'],
    todayHighlight: true,
    autoApply: true,      
    toggleActive: true,      
    defaultViewDate: { year:"{{ season.validity}}", month: 0, day: 1},        
    startDate: new Date("{{ season.validity}}", 1 -1, 1),
    endDate: new Date("{{ season.validity}}", 1 -1,31),
    datesDisabled: intervalos1,
    //datesDisabled: intervalos13,     
              
    beforeShowDay: function(date){ 
      var month = date.getMonth()+1;
      var year = date.getFullYear();
      var day = date.getDate();
                
      // format of date
      var newdate = day+"/"+month+'/'+year;
          
      // Set tooltip text when mouse over date
      var tooltip_text = "{{e.name_event}}";
            
      // Check date in Array
      if(jQuery.inArray(newdate,highlight_dates) != -1){        
        return {
          classes: 'active',
          tooltip: tooltip_text,
                                  
        }
      }
      return [true,'',''];
    }              
  });

   //fevereiro
   $('.datepicker2').datepicker({
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true,
      defaultViewDate: { year: "{{ season.validity}}", month: 1, day: 1 },        
      startDate: new Date("{{ season.validity}}", 2 -1, 1),
      endDate: new Date("{{ season.validity}}", 2 -1,28),
      datesDisabled: intervalos2,
      //datesDisabled: intervalos14,

      beforeShowDay: function(date){ 
      var month = date.getMonth()+1;
      var year = date.getFullYear();
      var day = date.getDate();
                
      // format of date
      var newdate = day+"/"+month+'/'+year;
          
      // Set tooltip text when mouse over date
      var tooltip_text = "{{e.name_event}}";
            
      // Check date in Array
      if(jQuery.inArray(newdate,highlight_dates) != -1){        
        return {
          classes: 'active',
          tooltip: tooltip_text,
                                  
        }
      }
      return [true,'',''];
    }                          
  });

  //março 
  $('.datepicker3').datepicker({
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true,
      defaultViewDate: { year: "{{ season.validity}}", month: 2, day: 1 },        
      startDate: new Date("{{ season.validity}}", 3 -1, 1),
      endDate: new Date("{{ season.validity}}", 3 -1,31),
      datesDisabled: intervalos3,
      //datesDisabled: intervalos15,

      beforeShowDay: function(date){ 
      var month = date.getMonth()+1;
      var year = date.getFullYear();
      var day = date.getDate();
                
      // format of date
      var newdate = day+"/"+month+'/'+year;
          
      // Set tooltip text when mouse over date
      var tooltip_text = "{{e.name_event}}";
            
      // Check date in Array
      if(jQuery.inArray(newdate,highlight_dates) != -1){        
        return {
          classes: 'active',
          tooltip: tooltip_text,
                                  
        }
      }
      return [true,'',''];
    }                          
  });

  //abril
  $('.datepicker4').datepicker({
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true,
      defaultViewDate: { year: "{{ season.validity}}", month: 3, day: 1 },        
      startDate: new Date("{{ season.validity}}", 4 -1, 1),
      endDate: new Date("{{ season.validity}}", 4 -1,30),
      datesDisabled: intervalos4,
      //datesDisabled: intervalos16,
      
      beforeShowDay: function(date){ 
      var month = date.getMonth()+1;
      var year = date.getFullYear();
      var day = date.getDate();
                
      // format of date
      var newdate = day+"/"+month+'/'+year;
          
      // Set tooltip text when mouse over date
      var tooltip_text = "{{e.name_event}}";
            
      // Check date in Array
      if(jQuery.inArray(newdate,highlight_dates) != -1){        
        return {
          classes: 'active',
          tooltip: tooltip_text,
                                  
        }
      }
      return [true,'',''];
    }              
                          
  });  
  
  //maio
  $('.datepicker5').datepicker({      
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true, 
      defaultViewDate: { year: "{{ season.validity}}", month: 4, day: 1 },            
      startDate: new Date("{{ season.validity}}", 5 -1, 1),
      endDate: new Date("{{ season.validity}}", 5 -1,31),
      datesDisabled: intervalos5,
      //datesDisabled: intervalos17,

      beforeShowDay: function(date){ 
      var month = date.getMonth()+1;
      var year = date.getFullYear();
      var day = date.getDate();
                
      // format of date
      var newdate = day+"/"+month+'/'+year;
          
      // Set tooltip text when mouse over date
      var tooltip_text = "{{e.name_event}}";
            
      // Check date in Array
      if(jQuery.inArray(newdate,highlight_dates) != -1){        
        return {
          classes: 'active',
          tooltip: tooltip_text,
                                  
        }
      }
      return [true,'',''];
    }              
      
                          
  });

   //junho 
   $('.datepicker6').datepicker({
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true,
      defaultViewDate: { year: "{{ season.validity}}", month: 5, day: 1 },        
      startDate: new Date("{{ season.validity}}", 6 -1, 1),
      endDate: new Date("{{ season.validity}}", 6 -1,30),
      datesDisabled: intervalos6,
      //datesDisabled: intervalos18, 
      
      beforeShowDay: function(date){ 
      var month = date.getMonth()+1;
      var year = date.getFullYear();
      var day = date.getDate();
                
      // format of date
      var newdate = day+"/"+month+'/'+year;
          
      // Set tooltip text when mouse over date
      var tooltip_text = "{{e.name_event}}";
            
      // Check date in Array
      if(jQuery.inArray(newdate,highlight_dates) != -1){        
        return {
          classes: 'active',
          tooltip: tooltip_text,
                                  
        }
      }
      return [true,'',''];
    }              
     
                          
  });

  //julho 
  $('.datepicker7').datepicker({
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true,
      defaultViewDate: { year: "{{ season.validity}}", month: 6, day: 1 },        
      startDate: new Date("{{ season.validity}}", 7 -1, 1),
      endDate: new Date("{{ season.validity}}", 7 -1,31),
      datesDisabled: intervalos7,
      //datesDisabled: intervalos19,

      beforeShowDay: function(date){ 
      var month = date.getMonth()+1;
      var year = date.getFullYear();
      var day = date.getDate();
                
      // format of date
      var newdate = day+"/"+month+'/'+year;
          
      // Set tooltip text when mouse over date
      var tooltip_text = "{{e.name_event}}";
            
      // Check date in Array
      if(jQuery.inArray(newdate,highlight_dates) != -1){        
        return {
          classes: 'active',
          tooltip: tooltip_text,
                                  
        }
      }
      return [true,'',''];
    }              
                          
  });

  //agosto 
  $('.datepicker8').datepicker({
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true,   
      defaultViewDate: { year: "{{ season.validity}}", month: 7, day: 1 },     
      startDate: new Date("{{ season.validity}}", 8 -1, 1),
      endDate: new Date("{{ season.validity}}", 8 -1,31),
      datesDisabled: intervalos8,
      //datesDisabled: intervalos20,

      beforeShowDay: function(date){ 
      var month = date.getMonth()+1;
      var year = date.getFullYear();
      var day = date.getDate();
                
      // format of date
      var newdate = day+"/"+month+'/'+year;
          
      // Set tooltip text when mouse over date
      var tooltip_text = "{{e.name_event}}";
            
      // Check date in Array
      if(jQuery.inArray(newdate,highlight_dates) != -1){        
        return {
          classes: 'active',
          tooltip: tooltip_text,
                                  
        }
      }
      return [true,'',''];
    }              
     
                          
  });

  //setembro 
  $('.datepicker9').datepicker({
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true,   
      defaultViewDate: { year: "{{ season.validity}}", month: 8, day: 1 },     
      startDate: new Date("{{ season.validity}}", 9 -1, 1),
      endDate: new Date("{{ season.validity}}", 9 -1,30),
      datesDisabled: intervalos9,
      //datesDisabled: intervalos21,

      beforeShowDay: function(date){ 
      var month = date.getMonth()+1;
      var year = date.getFullYear();
      var day = date.getDate();
                
      // format of date
      var newdate = day+"/"+month+'/'+year;
          
      // Set tooltip text when mouse over date
      var tooltip_text = "{{e.name_event}}";
            
      // Check date in Array
      if(jQuery.inArray(newdate,highlight_dates) != -1){        
        return {
          classes: 'active',
          tooltip: tooltip_text,
                                  
        }
      }
      return [true,'',''];
    }              
     
                          
  });

  //outubro 
  $('.datepicker10').datepicker({
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true,  
      defaultViewDate: { year: "{{ season.validity}}", month: 9, day: 1 },      
      startDate: new Date("{{ season.validity}}", 10 -1, 1),
      endDate: new Date("{{ season.validity}}", 10 -1,31),
      datesDisabled: intervalos10,
      //datesDisabled: intervalos22, 
      
      beforeShowDay: function(date){ 
      var month = date.getMonth()+1;
      var year = date.getFullYear();
      var day = date.getDate();
                
      // format of date
      var newdate = day+"/"+month+'/'+year;
          
      // Set tooltip text when mouse over date
      var tooltip_text = "{{e.name_event}}";
            
      // Check date in Array
      if(jQuery.inArray(newdate,highlight_dates) != -1){        
        return {
          classes: 'active',
          tooltip: tooltip_text,
                                  
        }
      }
      return [true,'',''];
    }              
                          
  });

  //novembro
  $('.datepicker11').datepicker({
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true, 
      defaultViewDate: { year: "{{ season.validity}}", month: 10, day: 1 },       
      startDate: new Date("{{ season.validity}}", 11 -1, 1),
      endDate: new Date("{{ season.validity}}", 11 -1,30),
      datesDisabled: intervalos11,
      //datesDisabled: intervalos23,  
      
      beforeShowDay: function(date){ 
      var month = date.getMonth()+1;
      var year = date.getFullYear();
      var day = date.getDate();
                
      // format of date
      var newdate = day+"/"+month+'/'+year;
          
      // Set tooltip text when mouse over date
      var tooltip_text = "{{e.name_event}}";
            
      // Check date in Array
      if(jQuery.inArray(newdate,highlight_dates) != -1){        
        return {
          classes: 'active',
          tooltip: tooltip_text,
                                  
        }
      }
      return [true,'',''];
    }              
                          
  }); 

  //dezembro
  $('.datepicker12').datepicker({
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true,
      defaultViewDate: { year: "{{ season.validity}}", month: 11, day: 1 },        
      startDate: new Date("{{ season.validity}}", 12 -1, 1),
      endDate: new Date("{{ season.validity}}", 12 -1,31),
      datesDisabled: intervalos12,
      //datesDisabled: intervalos24, 
      
      beforeShowDay: function(date){ 
      var month = date.getMonth()+1;
      var year = date.getFullYear();
      var day = date.getDate();
                
      // format of date
      var newdate = day+"/"+month+'/'+year;
          
      // Set tooltip text when mouse over date
      var tooltip_text = "{{e.name_event}}";
            
      // Check date in Array
      if(jQuery.inArray(newdate,highlight_dates) != -1){        
        return {
          classes: 'active',
          tooltip: tooltip_text,
                                  
        }
      }
      return [true,'',''];
    }              
                          
  }); 
</script>
    

<!--script>
  //2022
  //janeiro
  $('.datepicker1').datepicker({        
    dateFormat: "d/m/y",                                              
    language: ['pt-BR'],
    todayHighlight: true,
    autoApply: true,      
    toggleActive: true,      
    defaultViewDate: { year: 2022, month: 0, day: 1 },        
    startDate: new Date(2022, 1 -1, 1),
    endDate: new Date(2022, 1 -1,31),
    datesDisabled: intervalos1,
    
  });  

  
  //fevereiro
  $('.datepicker2').datepicker({
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true,
      defaultViewDate: { year: 2022, month: 1, day: 1 },        
      startDate: new Date(2022, 2 -1, 1),
      endDate: new Date(2022, 2 -1,28),
      datesDisabled: intervalos2,
                
                          
  });

  //março 
  $('.datepicker3').datepicker({
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true,
      defaultViewDate: { year: 2022, month: 2, day: 1 },        
      startDate: new Date(2022, 3 -1, 1),
      endDate: new Date(2022, 3 -1,31),
      datesDisabled: intervalos3,
      
                          
  });

  //abril
  $('.datepicker4').datepicker({
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true,
      defaultViewDate: { year: 2022, month: 3, day: 1 },        
      startDate: new Date(2022, 4 -1, 1),
      endDate: new Date(2022, 4 -1,30),
      datesDisabled: intervalos4,
      
                          
  });    
      
  //maio
  $('.datepicker5').datepicker({      
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true, 
      defaultViewDate: { year: 2022, month: 4, day: 1 },            
      startDate: new Date(2022, 5 -1, 1),
      endDate: new Date(2022, 5 -1,31),
      datesDisabled: intervalos5,
      
                          
  });

  //junho 
  $('.datepicker6').datepicker({
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true,
      defaultViewDate: { year: 2022, month: 5, day: 1 },        
      startDate: new Date(2022, 6 -1, 1),
      endDate: new Date(2022, 6 -1,30),
      datesDisabled: intervalos6,     
     
                          
  });

  //julho 
  $('.datepicker7').datepicker({
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true,
      defaultViewDate: { year: 2022, month: 6, day: 1 },        
      startDate: new Date(2022, 7 -1, 1),
      endDate: new Date(2022, 7 -1,31),
      datesDisabled: intervalos7,
                          
  });

  //agosto 
  $('.datepicker8').datepicker({
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true,   
      defaultViewDate: { year: 2022, month: 7, day: 1 },     
      startDate: new Date(2022, 8 -1, 1),
      endDate: new Date(2022, 8 -1,31),
      datesDisabled: intervalos8,
     
                          
  });

  //setembro 
  $('.datepicker9').datepicker({
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true,   
      defaultViewDate: { year: 2022, month: 8, day: 1 },     
      startDate: new Date(2022, 9 -1, 1),
      endDate: new Date(2022, 9 -1,30),
      datesDisabled: intervalos9,
     
                          
  });

  //outubro 
  $('.datepicker10').datepicker({
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true,  
      defaultViewDate: { year: 2022, month: 9, day: 1 },      
      startDate: new Date(2022, 10 -1, 1),
      endDate: new Date(2022, 10 -1,31),
      datesDisabled: intervalos10,       
                          
  });

  //novembro
  $('.datepicker11').datepicker({
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true, 
      defaultViewDate: { year: 2022, month: 10, day: 1 },       
      startDate: new Date(2022, 11 -1, 1),
      endDate: new Date(2022, 11 -1,30),
      datesDisabled: intervalos11,       
                          
  }); 

  //dezembro
  $('.datepicker12').datepicker({
      dateFormat: "dd/mm/yy",                                              
      language: ['pt-BR'],
      todayHighlight: true,
      autoApply: true,
      defaultViewDate: { year: 2022, month: 11, day: 1 },        
      startDate: new Date(2022, 12 -1, 1),
      endDate: new Date(2022, 12 -1,31),
      datesDisabled: intervalos12,       
                          
  });  
  
</script--> 
{% endblock %}

